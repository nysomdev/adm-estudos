<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cofre Eletrônico</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        .safe-container {
            text-align: center;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .safe-image {
            width: 250px;
            height: auto;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .display {
            background-color: #222;
            color: #0f0;
            font-size: 1.5em;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            letter-spacing: 2px;
        }

        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            width: 200px;
            margin: 0 auto 20px auto;
        }

        .keypad button {
            width: 60px;
            height: 60px;
            font-size: 1.2em;
            background-color: #eee;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .keypad button:hover {
            background-color: #ddd;
        }

        .keypad button:active {
            background-color: #ccc;
        }

        #clear-button, #enter-button {
            width: 100%; /* Para ocupar 3 colunas */
            grid-column: span 3; /* Para ocupar 3 colunas */
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }

        #clear-button {
            background-color: #dc3545; /* Vermelho para Limpar */
        }

        #clear-button:hover {
            background-color: #c82333;
        }

        #enter-button:hover {
            background-color: #0056b3;
        }

        .message {
            margin-top: 20px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .success {
            color: green;
        }

        .error {
            color: red;
        }
    </style>
</head>
<body>
    <div class="safe-container">
        <img src="http://googleusercontent.com/image_generation_content/1" alt="Cofre Eletrônico" class="safe-image">
        <div class="display" id="password-display"></div>
        <div class="keypad">
            <button class="key" data-value="1">1</button>
            <button class="key" data-value="2">2</button>
            <button class="key" data-value="3">3</button>
            <button class="key" data-value="4">4</button>
            <button class="key" data-value="5">5</button>
            <button class="key" data-value="6">6</button>
            <button class="key" data-value="7">7</button>
            <button class="key" data-value="8">8</button>
            <button class="key" data-value="9">9</button>
            <button class="key" data-value="0" style="grid-column: 2 / span 1;">0</button>
            <button id="clear-button">Limpar</button>
            <button id="enter-button">Entrar</button>
        </div>
        <div class="message" id="feedback-message"></div>
    </div>

    <script>
        const passwordDisplay = document.getElementById('password-display');
        const feedbackMessage = document.getElementById('feedback-message');
        const keys = document.querySelectorAll('.key');
        const clearButton = document.getElementById('clear-button');
        const enterButton = document.getElementById('enter-button');

        let currentPassword = '';
        const correctPasswords = []; // As senhas válidas serão carregadas aqui

        // Simula o carregamento do arquivo relacao.txt
        // Em um ambiente real, você faria uma requisição AJAX (fetch API) para carregar relacao.txt
        // Para este exemplo, as senhas serão definidas aqui.
        // A lógica de filtragem "xy1509" será aplicada aqui.
        const mockRelationFileContent = `
            xy1509senhaCorreta1
            outrasenhaerrada
            xy1509outraSenhaValida
            123456
            xy1509finalPassword
            mix12345
        `;

        function loadPasswords() {
            const lines = mockRelationFileContent.split('\n').map(line => line.trim()).filter(line => line.length > 0);
            lines.forEach(line => {
                if (line.startsWith('xy1509')) {
                    correctPasswords.push(line);
                }
            });
            console.log("Senhas válidas carregadas:", correctPasswords); // Para depuração
        }

        // Adiciona eventos para os botões do teclado
        keys.forEach(key => {
            key.addEventListener('click', () => {
                currentPassword += key.dataset.value;
                passwordDisplay.textContent = currentPassword;
                feedbackMessage.textContent = ''; // Limpa a mensagem de feedback ao digitar
            });
        });

        // Evento para o botão Limpar
        clearButton.addEventListener('click', () => {
            currentPassword = '';
            passwordDisplay.textContent = '';
            feedbackMessage.textContent = '';
        });

        // Evento para o botão Entrar
        enterButton.addEventListener('click', () => {
            if (correctPasswords.includes(currentPassword)) {
                feedbackMessage.textContent = 'Senha Correta! Acesso Liberado!';
                feedbackMessage.className = 'message success';
            } else {
                feedbackMessage.textContent = 'Senha Incorreta. Tente novamente.';
                feedbackMessage.className = 'message error';
            }
            currentPassword = ''; // Limpa a senha após a tentativa
            passwordDisplay.textContent = '';
        });

        // Carrega as senhas quando a página é carregada
        document.addEventListener('DOMContentLoaded', loadPasswords);
    </script>
</body>
</html>
